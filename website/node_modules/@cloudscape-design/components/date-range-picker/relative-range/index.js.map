{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../src/date-range-picker/relative-range/index.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport clsx from 'clsx';\nimport React, { useState } from 'react';\nimport { DateRangePickerProps } from '../interfaces';\nimport InternalBox from '../../box/internal';\nimport InternalFormField from '../../form-field/internal';\nimport InternalInput from '../../input/internal';\nimport { RadioGroupProps } from '../../radio-group/interfaces';\nimport InternalRadioGroup from '../../radio-group/internal';\nimport InternalSelect from '../../select/internal';\nimport InternalSpaceBetween from '../../space-between/internal';\nimport styles from './styles.css.js';\nimport { useInternalI18n } from '../../i18n/context';\n\nexport interface RelativeRangePickerProps {\n  dateOnly: boolean;\n  options: ReadonlyArray<DateRangePickerProps.RelativeOption>;\n  initialSelection: DateRangePickerProps.RelativeValue | null;\n  onChange: (range: DateRangePickerProps.RelativeValue) => void;\n  i18nStrings?: DateRangePickerProps.I18nStrings;\n  isSingleGrid: boolean;\n}\n\ninterface UnitSelectOption {\n  value: DateRangePickerProps.TimeUnit;\n  label: string;\n}\n\nconst dayUnits: ReadonlyArray<DateRangePickerProps.TimeUnit> = ['day', 'week', 'month', 'year'];\nconst units: ReadonlyArray<DateRangePickerProps.TimeUnit> = ['second', 'minute', 'hour', ...dayUnits];\n\nconst CUSTOM_OPTION_SELECT_KEY = 'awsui-internal-custom-duration-key';\n\nexport default function RelativeRangePicker({\n  dateOnly,\n  options: clientOptions = [],\n  initialSelection: initialRange,\n  onChange: onChangeRangeSize,\n  i18nStrings,\n  isSingleGrid,\n}: RelativeRangePickerProps) {\n  const i18n = useInternalI18n('date-range-picker');\n  const formatRelativeRange = i18n(\n    'i18nStrings.formatRelativeRange',\n    i18nStrings?.formatRelativeRange,\n    format =>\n      ({ amount, unit }) =>\n        format({ amount, unit })\n  );\n  const formatUnit = i18n(\n    'i18nStrings.formatUnit',\n    i18nStrings?.formatUnit,\n    format => (unit, amount) => format({ amount, unit })\n  );\n\n  const radioOptions: RadioGroupProps.RadioButtonDefinition[] = clientOptions.map(option => ({\n    value: option.key,\n    label: formatRelativeRange?.(option),\n  }));\n  radioOptions.push({\n    value: CUSTOM_OPTION_SELECT_KEY,\n    label: i18n('i18nStrings.customRelativeRangeOptionLabel', i18nStrings?.customRelativeRangeOptionLabel),\n    description: i18n(\n      'i18nStrings.customRelativeRangeOptionDescription',\n      i18nStrings?.customRelativeRangeOptionDescription\n    ),\n  });\n\n  const [selectedRadio, setSelectedRadio] = useState(() => {\n    if (initialRange && !initialRange.key) {\n      return CUSTOM_OPTION_SELECT_KEY;\n    }\n    return initialRange?.key ?? null;\n  });\n\n  const [customDuration, setCustomDuration] = useState(() => {\n    if (initialRange) {\n      return initialRange.amount;\n    }\n    // NaN represents an empty duration\n    return NaN;\n  });\n\n  const initialCustomTimeUnit = dateOnly ? 'day' : 'minute';\n  const [customUnitOfTime, setCustomUnitOfTime] = useState<DateRangePickerProps.TimeUnit>(\n    initialRange?.unit ?? initialCustomTimeUnit\n  );\n\n  const showRadioControl = clientOptions.length > 0;\n  const showCustomControls = clientOptions.length === 0 || selectedRadio === CUSTOM_OPTION_SELECT_KEY;\n\n  return (\n    <div>\n      <InternalSpaceBetween size=\"xs\" direction=\"vertical\">\n        {showRadioControl && (\n          <InternalFormField\n            label={i18n('i18nStrings.relativeRangeSelectionHeading', i18nStrings?.relativeRangeSelectionHeading)}\n          >\n            <InternalRadioGroup\n              className={styles['relative-range-radio-group']}\n              onChange={({ detail }) => {\n                setSelectedRadio(detail.value);\n\n                if (detail.value === CUSTOM_OPTION_SELECT_KEY) {\n                  setCustomDuration(NaN);\n                  setCustomUnitOfTime(initialCustomTimeUnit);\n                  onChangeRangeSize({\n                    amount: NaN,\n                    unit: initialCustomTimeUnit,\n                    type: 'relative',\n                  });\n                } else {\n                  const option = clientOptions.filter(o => o.key === detail.value)[0];\n                  onChangeRangeSize(option);\n                }\n              }}\n              value={selectedRadio}\n              items={radioOptions}\n            />\n          </InternalFormField>\n        )}\n\n        {showCustomControls && (\n          <InternalSpaceBetween direction=\"vertical\" size=\"xs\">\n            {!showRadioControl && (\n              <InternalBox fontSize=\"body-m\" color=\"text-body-secondary\">\n                {i18n(\n                  'i18nStrings.customRelativeRangeOptionDescription',\n                  i18nStrings?.customRelativeRangeOptionDescription\n                )}\n              </InternalBox>\n            )}\n\n            <div\n              className={clsx(styles['custom-range'], {\n                [styles['custom-range--no-padding']]: !showRadioControl,\n              })}\n            >\n              <div\n                className={clsx(styles['custom-range-form-controls'], {\n                  [styles.vertical]: isSingleGrid,\n                })}\n              >\n                <div className={styles['custom-range-duration']}>\n                  <InternalFormField\n                    label={i18n(\n                      'i18nStrings.customRelativeRangeDurationLabel',\n                      i18nStrings?.customRelativeRangeDurationLabel\n                    )}\n                  >\n                    <InternalInput\n                      type=\"number\"\n                      className={styles['custom-range-duration-input']}\n                      value={isNaN(customDuration) || customDuration === 0 ? '' : customDuration?.toString()}\n                      onChange={e => {\n                        const amount = Number(e.detail.value);\n\n                        setCustomDuration(amount);\n                        onChangeRangeSize({ amount, unit: customUnitOfTime, type: 'relative' });\n                      }}\n                      placeholder={i18n(\n                        'i18nStrings.customRelativeRangeDurationPlaceholder',\n                        i18nStrings?.customRelativeRangeDurationPlaceholder\n                      )}\n                      __inheritFormFieldProps={true}\n                    />\n                  </InternalFormField>\n                </div>\n\n                <div className={styles['custom-range-unit']}>\n                  <InternalFormField\n                    label={i18n('i18nStrings.customRelativeRangeUnitLabel', i18nStrings?.customRelativeRangeUnitLabel)}\n                  >\n                    <InternalSelect\n                      className={styles['custom-range-unit-select']}\n                      selectedOption={\n                        {\n                          value: customUnitOfTime,\n                          label: formatUnit?.(customUnitOfTime, customDuration),\n                        } as UnitSelectOption\n                      }\n                      onChange={e => {\n                        const { value: unit } = e.detail.selectedOption as UnitSelectOption;\n\n                        setCustomUnitOfTime(unit);\n                        onChangeRangeSize({ amount: customDuration, unit, type: 'relative' });\n                      }}\n                      options={(dateOnly ? dayUnits : units).map(unit => ({\n                        value: unit,\n                        label: formatUnit?.(unit, customDuration),\n                      }))}\n                      renderHighlightedAriaLive={option => option.label || option.value || ''}\n                    />\n                  </InternalFormField>\n                </div>\n              </div>\n            </div>\n          </InternalSpaceBetween>\n        )}\n      </InternalSpaceBetween>\n    </div>\n  );\n}\n"]}