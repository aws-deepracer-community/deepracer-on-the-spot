{"version":3,"file":"interfaces.js","sourceRoot":"","sources":["../../../src/table/interfaces.tsx"],"names":[],"mappings":"","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport { BaseComponentProps } from '../internal/base-component';\nimport { NonCancelableEventHandler, CancelableEventHandler } from '../internal/events';\nimport { Optional } from '../internal/types';\nimport ColumnDisplayProperties = TableProps.ColumnDisplayProperties;\n\n/*\n * HACK: Cast the component to a named parametrized interface.\n *\n * This lets us use React.forwardRef and still let the component have type\n * parameters, and the naming convention lets the documenter know that this is\n * a forwardRef-wrapped component.\n *\n * We don't need to expose this type to customers because it's just a simple\n * function type.\n */\nexport interface TableForwardRefType {\n  <T>(props: TableProps<T> & { ref?: React.Ref<TableProps.Ref> }): JSX.Element;\n}\n\nexport interface TableProps<T = any> extends BaseComponentProps {\n  /**\n   * Heading element of the table container. Use the [header component](/components/header/).\n   */\n  header?: React.ReactNode;\n\n  /**\n   * Footer of the table container.\n   */\n  footer?: React.ReactNode;\n\n  /**\n   * Displayed when the `items` property is an empty array. Use it to render an empty or no-match state.\n   */\n  empty?: React.ReactNode;\n\n  /**\n   * Specifies the data that's displayed in the table rows. Each item contains the data for one row. The display of a row is handled\n   * by the `cell` property of each column definition in the `columnDefinitions` property.\n   */\n  items: ReadonlyArray<T>;\n\n  /**\n   * Renders the table in a loading state. We recommend that you also set a `loadingText`.\n   */\n  loading?: boolean;\n\n  /**\n   * Specifies the text that's displayed when the table is in a loading state.\n   */\n  loadingText?: string;\n\n  /**\n   * Specifies a property that uniquely identifies an individual item.\n   * When it's set, it's used to provide [keys for React](https://reactjs.org/docs/lists-and-keys.html#keys)\n   * for performance optimizations.\n   *\n   * It's also used to connect `items` and `selectedItems` or `expandableRows.expandedItems` values when they reference different objects.\n   */\n  trackBy?: TableProps.TrackBy<T>;\n\n  /**\n   * The columns configuration object\n   * * `id` (string) - Specifies a unique column identifier. The property is used 1) as a [keys](https://reactjs.org/docs/lists-and-keys.html#keys) source for React rendering,\n   *   and 2) to match entries in the `columnDisplay` property, if defined.\n   * * `header` (ReactNode) - Determines the display of the column header.\n   * * `cell` ((item) => ReactNode) - Determines the display of a cell's content. You receive the current table row\n   *   item as an argument.\n   * * `width` (string | number) - Specifies the column width. Corresponds to the `width` css-property. If the width is not set,\n   *   the browser automatically adjusts the column width based on the content. When `resizableColumns` property is\n   *   set to `true`, additional constraints apply: 1) string values are not allowed, and 2) the last visible column always\n   *   fills the remaining space of the table so the specified width is ignored.\n   * * `minWidth` (string | number) - Specifies the minimum column width. Corresponds to the `min-width` css-property. When\n   *   `resizableColumns` property is set to `true`, additional constraints apply: 1) string values are not allowed,\n   *   and 2) the column can't resize below than the specified width (defaults to \"120px\"). We recommend that you set a minimum width\n   *   of at least 176px for columns that are editable.\n   * * `maxWidth` (string | number) - Specifies the maximum column width. Corresponds to the `max-width` css-property.\n   *   Note that when the `resizableColumns` property is set to `true` this property is ignored.\n   * * `ariaLabel` (LabelData => string) - An optional function that's called to provide an `aria-label` for the cell header.\n   *   It receives the current sorting state of this column, the direction it's sorted in, and an indication of\n   *   whether the sorting is disabled, as three Boolean values: `sorted`, `descending` and `disabled`.\n   *   We recommend that you use this for sortable columns to provide more meaningful labels based on the\n   *   current sorting direction.\n   * * `sortingField` (string) - Enables default column sorting. The value is used in [collection hooks](/get-started/dev-guides/collection-hooks/)\n   *   to reorder the items. Provide the name of the property within each item that should be used for sorting by this column.\n   *   For more complex sorting use `sortingComparator` instead.\n   * * `sortingComparator` ((T, T) => number) - Enables custom column sorting. The value is used in [collection hooks](/get-started/dev-guides/collection-hooks/)\n   *   to reorder the items. This property accepts a custom comparator that is used to compare two items.\n   *   The comparator must implement ascending ordering, and the output is inverted automatically in case of descending order.\n   *   If present, the `sortingField` property is ignored.\n   * * `editConfig` (EditConfig) - Enables inline editing in column when present. The value is used to configure the editing behavior.\n   * * * `editConfig.ariaLabel` (string) - Specifies a label for the edit control. Visually hidden but read by screen readers.\n   * * * `editConfig.errorIconAriaLabel` (string) - Specifies an ariaLabel for the error icon that is displayed when the validation fails.\n   * * * `editConfig.editIconAriaLabel` (string) - Specifies an alternate text for the edit icon used in column header.\n   * * * `editConfig.constraintText` (string) - Constraint text that is displayed below the edit control.\n   * * * `editConfig.disabledReason` ((item) => string | undefined) - A function that determines whether inline edit for certain items is disabled, and provides a reason why.\n   *            Return a string from the function to disable inline edit with a reason. Return `undefined` (or no return) from the function allow inline edit.\n   * * * `editConfig.validation` ((item, value) => string) - A function that allows you to validate the value of the edit control.\n   *            Return a string from the function to display an error message. Return `undefined` (or no return) from the function to indicate that the value is valid.\n   * * * `editConfig.editingCell` ((item, cellContext) => ReactNode) - Determines the display of a cell's content when inline editing is active on a cell;\n   *        You receive the current table row `item` and a `cellContext` object as arguments.\n   *        The `cellContext` object contains the following properties:\n   *  *  * `cellContext.currentValue` - State to keep track of a value in input fields while editing.\n   *  *  * `cellContext.setValue` - Function to update `currentValue`. This should be called when the value in input field changes.\n   *  * `isRowHeader` (boolean) - Specifies that cells in this column should be used as row headers.\n   */\n  columnDefinitions: ReadonlyArray<TableProps.ColumnDefinition<T>>;\n  /**\n   * Specifies the selection type (`'single' | 'multi'`).\n   */\n  selectionType?: TableProps.SelectionType;\n  /**\n   * List of selected items.\n   */\n  selectedItems?: ReadonlyArray<T>;\n\n  /**\n   * Use this slot to add filtering controls to the table.\n   */\n  filter?: React.ReactNode;\n\n  /**\n   * Use this slot to add the [pagination component](/components/pagination/) to the table.\n   */\n  pagination?: React.ReactNode;\n\n  /**\n   * Use this slot to add [collection preferences](/components/collection-preferences/) to the table.\n   */\n  preferences?: React.ReactNode;\n\n  /**\n   * Determines whether a given item is disabled. If an item is disabled, the user can't select it.\n   */\n  isItemDisabled?: TableProps.IsItemDisabled<T>;\n\n  /**\n   * Specifies if text wraps within table cells. If set to `true`, long text within cells may wrap onto\n   * multiple lines instead of being truncated with an ellipsis.\n   */\n  wrapLines?: boolean;\n\n  /**\n   * Specifies if table rows alternate being shaded and unshaded. If set to `true`, every other row will be shaded.\n   */\n  stripedRows?: boolean;\n\n  /**\n   * Toggles the content density of the table. Defaults to `'comfortable'`.\n   */\n  contentDensity?: 'comfortable' | 'compact';\n\n  /**\n   * Specifies if columns can be resized. If set to `true`, users can resize the columns in the table.\n   */\n  resizableColumns?: boolean;\n\n  /**\n   * Specifies alternative text for the selection components (checkboxes and radio buttons) as follows:\n   * * `itemSelectionLabel` ((SelectionState, Item) => string) - Specifies the alternative text for an item.\n   * * `allItemsSelectionLabel` ((SelectionState) => string) - Specifies the alternative text for multi-selection column header.\n   * * `selectionGroupLabel` (string) - Specifies the alternative text for the whole selection and single-selection column header.\n   *                                    It is prefixed to `itemSelectionLabel` and `allItemsSelectionLabel` when they are set.\n   * You can use the first argument of type `SelectionState` to access the current selection\n   * state of the component (for example, the `selectedItems` list). The `itemSelectionLabel` for individual\n   * items also receives the corresponding  `Item` object. You can use the `selectionGroupLabel` to\n   * add a meaningful description to the whole selection.\n   * * `tableLabel` (string) - Provides an alternative text for the table. If you use a header for this table, you may reuse the string\n   *                           to provide a caption-like description. For example, tableLabel=Instances will be announced as 'Instances table'.\n   * * `resizerRoleDescription` (string) - Provides role description for table column resizer buttons.\n   * * `activateEditLabel` (EditableColumnDefinition, Item) => string -\n   *                      Specifies an alternative text for the edit button in editable cells.\n   * * `cancelEditLabel` (EditableColumnDefinition) => string -\n   *                      Specifies an alternative text for the cancel button in editable cells.\n   * * `submitEditLabel` (EditableColumnDefinition) => string -\n   *                      Specifies an alternative text for the submit button in editable cells.\n   * * `successfulEditLabel` (EditableColumnDefinition) => string -\n   *                      Specifies an alternative text for the success icon in editable cells. This text is also announced to screen readers.\n   * * `submittingEditText` (EditableColumnDefinition) => string -\n   *                      Specifies a text that is announced to screen readers when a cell edit operation is submitted.\n   * * `expandButtonLabel` (Item) => string - Specifies an alternative text for row expand button.\n   * * `collapseButtonLabel` (Item) => string - Specifies an alternative text for row collapse button.\n   * @i18n\n   */\n  ariaLabels?: TableProps.AriaLabels<T>;\n\n  /**\n   * Specifies the definition object of the currently sorted column. Make sure you pass an object that's\n   * present in the `columnDefinitions` array.\n   */\n  sortingColumn?: TableProps.SortingColumn<T>;\n  /**\n   * Specifies whether to use a descending sort order.\n   */\n  sortingDescending?: boolean;\n  /**\n   * Specifies if sorting buttons are disabled. For example, use this property\n   * to prevent the user from sorting before items are fully loaded.\n   */\n  sortingDisabled?: boolean;\n\n  /**\n   * Specifies the number of first and/or last columns that should be sticky.\n   *\n   * If the available scrollable space is less than a certain threshold, the feature is deactivated.\n   *\n   * Use it in conjunction with the sticky columns preference of the\n   * [collection preferences](/components/collection-preferences/) component.\n   *\n   */\n  stickyColumns?: TableProps.StickyColumns;\n\n  /**\n   * Specifies an array that represents the table columns in the order in which they will be displayed, together with their visibility.\n   *\n   * If not set, all columns are displayed and the order is dictated by the `columnDefinitions` property.\n   *\n   * Use it in conjunction with the content display preference of the [collection preferences](/components/collection-preferences/) component.\n   */\n  columnDisplay?: ReadonlyArray<ColumnDisplayProperties>;\n\n  /**\n   * Specifies an array containing the `id`s of visible columns. If not set, all columns are displayed.\n   *\n   * Use it in conjunction with the visible content preference of the [collection preferences](/components/collection-preferences/) component.\n   *\n   * The order of ids doesn't influence the order in which columns are displayed - this is dictated by the `columnDefinitions` property.\n   *\n   * @deprecated Replaced by `columnDisplay`.\n   */\n  visibleColumns?: ReadonlyArray<string>;\n\n  /**\n   * Fired when the user resizes a table column. The event detail contains an array of column widths in pixels,\n   * including the hidden via preferences columns. Use this event to persist the column widths.\n   */\n  onColumnWidthsChange?: NonCancelableEventHandler<TableProps.ColumnWidthsChangeDetail>;\n\n  /**\n   * Called when either the column to sort by or the direction of sorting changes upon user interaction.\n   * The event detail contains the current sortingColumn and isDescending.\n   */\n  onSortingChange?: NonCancelableEventHandler<TableProps.SortingState<T>>;\n\n  /**\n   * Fired when a user interaction triggers a change in the list of selected items.\n   * The event `detail` contains the current list of `selectedItems`.\n   */\n  onSelectionChange?: NonCancelableEventHandler<TableProps.SelectionChangeDetail<T>>;\n\n  /**\n   * Note: This feature is provided for backwards compatibility. Its use is not recommended,\n   * and it may be deprecated in the future.\n   *\n   * Called when the user clicked at a table row. The event detail contains the index of the\n   * clicked row and the row object itself. Use this event to define a row click behavior.\n   */\n  onRowClick?: NonCancelableEventHandler<TableProps.OnRowClickDetail<T>>;\n\n  /**\n   * Note: This feature is provided for backwards compatibility. Its use is not recommended,\n   * and it may be deprecated in the future.\n   *\n   * Called when the user clicked at a table row with the right mouse click. The event detail\n   * contains the index of the clicked row and the row object itself. Use this event to override\n   * the default browser context menu behavior.\n   */\n  onRowContextMenu?: CancelableEventHandler<TableProps.OnRowContextMenuDetail<T>>;\n\n  /**\n   * If set to `true`, the table header remains visible when the user scrolls down.\n   */\n  stickyHeader?: boolean;\n\n  /**\n   * Specifies a vertical offset (in pixels) for the sticky header. For example, use this if you\n   * need to position the sticky header below other fixed position elements on the page.\n   */\n  stickyHeaderVerticalOffset?: number;\n\n  /**\n   * Specify a table variant with one of the following:\n   * * `container` - Use this variant to have the table displayed within a container.\n   * * `borderless` - Use this variant when the table should have no outer borders or shadow\n   *                  (such as in a dashboard item container).\n   * * `embedded` - Use this variant within a parent container (such as a modal, expandable\n   *                section, container or split panel).\n   *                **Deprecated**, replaced by `borderless` and `container`.\n   * * `stacked` - Use this variant adjacent to other stacked containers (such as a container,\n   *               table).\n   * * `full-page` â€“ Use this variant when the table is the entire content of a page. Full page variants\n   *                 implement the high contrast header and content behavior automatically.\n   * @visualrefresh `embedded`, `stacked`, and `full-page` variants\n   */\n  variant?: TableProps.Variant;\n\n  /**\n   * Use this property to inform screen readers how many items there are in a table.\n   * It specifies the total count of all items in a table.\n   * If there is an unknown total of items in a table, leave this property undefined.\n   */\n  totalItemsCount?: number;\n  /**\n   *  Use this property to inform screen readers which range of items is currently displayed in the table.\n   *  It specifies the index (1-based) of the first item in the table.\n   *  If the table has no pagination, leave this property undefined.\n   */\n  firstIndex?: number;\n  /**\n   * Use this function to announce page changes to screen reader users.\n   * Requires the properties firstIndex and totalItemsCount to be set correctly.\n   */\n  renderAriaLive?: (data: TableProps.LiveAnnouncement) => string;\n  /**\n   * Specifies a function that will be called after user submits an inline edit.\n   * Return a promise to keep loading state while the submit request is in progress.\n   */\n  submitEdit?: TableProps.SubmitEditFunction<T>;\n\n  /**\n   * Called whenever user cancels an inline edit. Use this function to reset any\n   * validation states, or show warning for unsaved changes.\n   */\n  onEditCancel?: CancelableEventHandler;\n\n  /**\n   * Use this property to activate advanced keyboard navigation and focusing behaviors.\n   * When set to `true`, table cells become navigable with arrow keys, and the entire table has a single tab stop.\n   *\n   * By default, the keyboard navigation is active for tables with expandable rows.\n   */\n  enableKeyboardNavigation?: boolean;\n\n  /**\n   * Use this property to define expandable table rows. The expandableRows configuration object consists of:\n   * * `getItemChildren` ((Item) => Item[]) - Use it to define nested data that are shown when an item gets expanded.\n   * * `isItemExpandable` ((Item) => boolean) - Use it for items that can be expanded to show nested data.\n   * * `expandedItems` (Item[]) - Use it to represent the expanded state of items.\n   * * `onExpandableItemToggle` (TableProps.OnExpandableItemToggle<T>) - Called when an item's expand toggle is clicked.\n   */\n  expandableRows?: TableProps.ExpandableRows<T>;\n}\n\nexport namespace TableProps {\n  export type TrackBy<T> = string | ((item: T) => string);\n\n  export interface CellContext<V> {\n    currentValue: Optional<V>;\n    setValue: (value: V | undefined) => void;\n  }\n\n  export interface EditConfig<T, V = any> {\n    /**\n     * Specifies a label for the edit control. Visually hidden but read\n     * by screen readers.\n     */\n    ariaLabel?: string;\n    /**\n     * Specifies an ariaLabel for the error icon that is displayed when\n     * the validation fails.\n     */\n    errorIconAriaLabel?: string;\n    /**\n     * Specifies an alternate text for the edit icon used in column header.\n     */\n    editIconAriaLabel?: string;\n    /**\n     * Constraint text that is displayed below the edit control.\n     */\n    constraintText?: string;\n    /**\n     * A function that allows you to validate the value of the edit control. Return\n     * a string from the function to display an error message. Return\n     * `undefined` (or no return) from the function to indicate that the value is valid.\n     * @param item - The item that is being edited.\n     * @param value - The current value of the edit control.\n     */\n    validation?: (item: T, value: Optional<V>) => Optional<string>;\n\n    /**\n     * Determines the display of a cell's content when inline edit is active.\n     */\n    editingCell(item: T, ctx: TableProps.CellContext<any>): React.ReactNode;\n\n    /**\n     * Determines whether inline edit for certain items is disabled, and provides a reason why.\n     */\n    disabledReason?: (item: T) => string | undefined;\n  }\n\n  export type ColumnDefinition<ItemType> = {\n    id?: string;\n    header: React.ReactNode;\n    ariaLabel?(data: LabelData): string;\n    width?: number | string;\n    minWidth?: number | string;\n    maxWidth?: number | string;\n    editConfig?: EditConfig<ItemType>;\n    isRowHeader?: boolean;\n    cell(item: ItemType): React.ReactNode;\n  } & SortingColumn<ItemType>;\n\n  export interface StickyColumns {\n    first?: number;\n    last?: number;\n  }\n\n  export type SelectionType = 'single' | 'multi';\n  export type Variant = 'container' | 'embedded' | 'borderless' | 'stacked' | 'full-page';\n  export interface SelectionState<T> {\n    selectedItems: ReadonlyArray<T>;\n  }\n  export interface SelectionChangeDetail<T> {\n    selectedItems: T[];\n  }\n  export type IsItemDisabled<T> = (item: T) => boolean;\n  export interface AriaLabels<T> {\n    allItemsSelectionLabel?: (data: TableProps.SelectionState<T>) => string;\n    itemSelectionLabel?: (data: TableProps.SelectionState<T>, row: T) => string;\n    selectionGroupLabel?: string;\n    tableLabel?: string;\n    resizerRoleDescription?: string;\n    // do not use <T> to prevent overly strict validation on consumer end\n    // it works, practically, we are only interested in `id` and `header` properties only\n    activateEditLabel?: (column: ColumnDefinition<any>, item: T) => string;\n    cancelEditLabel?: (column: ColumnDefinition<any>) => string;\n    submitEditLabel?: (column: ColumnDefinition<any>) => string;\n    submittingEditText?: (column: ColumnDefinition<any>) => string;\n    successfulEditLabel?: (column: ColumnDefinition<any>) => string;\n    expandButtonLabel?: (item: T) => string;\n    collapseButtonLabel?: (item: T) => string;\n  }\n  export interface SortingState<T> {\n    isDescending?: boolean;\n    sortingColumn: SortingColumn<T>;\n  }\n  export interface SortingColumn<T> {\n    sortingField?: string;\n    sortingComparator?: (a: T, b: T) => number;\n  }\n  export interface LabelData {\n    sorted: boolean;\n    descending: boolean;\n    disabled: boolean;\n  }\n  export interface OnRowClickDetail<T> {\n    rowIndex: number;\n    item: T;\n  }\n  export interface OnRowContextMenuDetail<T> {\n    rowIndex: number;\n    item: T;\n    clientX: number;\n    clientY: number;\n  }\n\n  export interface ColumnWidthsChangeDetail {\n    widths: ReadonlyArray<number>;\n  }\n\n  export interface LiveAnnouncement {\n    totalItemsCount?: number;\n    firstIndex: number;\n    lastIndex: number;\n  }\n\n  export interface Ref {\n    /**\n     * When the sticky header is enabled and you call this function, the table\n     * scroll parent scrolls to reveal the first row of the table.\n     */\n    scrollToTop(): void;\n\n    /**\n     * Dismiss an inline edit if currently active.\n     */\n    cancelEdit?(): void;\n  }\n\n  export type SubmitEditFunction<ItemType, ValueType = unknown> = (\n    item: ItemType,\n    column: ColumnDefinition<ItemType>,\n    newValue: ValueType\n  ) => Promise<void> | void;\n\n  export interface ColumnDisplayProperties {\n    id: string;\n    visible: boolean;\n  }\n\n  export interface ExpandableRows<T> {\n    getItemChildren: (item: T) => readonly T[];\n    isItemExpandable: (item: T) => boolean;\n    expandedItems: ReadonlyArray<T>;\n    onExpandableItemToggle: TableProps.OnExpandableItemToggle<T>;\n  }\n\n  export type OnExpandableItemToggle<T> = NonCancelableEventHandler<TableProps.ExpandableItemToggleDetail<T>>;\n\n  export interface ExpandableItemToggleDetail<T> {\n    item: T;\n    expanded: boolean;\n  }\n}\n"]}