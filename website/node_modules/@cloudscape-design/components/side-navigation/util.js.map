{"version":3,"file":"util.js","sourceRoot":"","sources":["../../../src/side-navigation/util.tsx"],"names":[],"mappings":"AAGA,OAAO,EAAE,QAAQ,EAAE,MAAM,+CAA+C,CAAC;AAIzE,MAAM,UAAU,aAAa,CAAC,KAA8C,EAAE,UAAkB;IAC9F,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;QACxB,IACE,CAAC,IAAI,CAAC,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC,IAAI,KAAK,YAAY,IAAI,IAAI,CAAC,IAAI,KAAK,uBAAuB,CAAC;YAC7F,IAAI,CAAC,IAAI,KAAK,UAAU,EACxB;YACA,OAAO,IAAI,CAAC;SACb;QACD,IACE,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC,IAAI,KAAK,YAAY,IAAI,IAAI,CAAC,IAAI,KAAK,uBAAuB,CAAC;YAChG,aAAa,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,CAAC,EACrC;YACA,OAAO,IAAI,CAAC;SACb;KACF;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AAED,MAAM,UAAU,8BAA8B,CAC5C,KAA8C,EAC9C,UAA4E,IAAI,OAAO,EAAE,EACzF,oBAAmD,EAAE;IAErD,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;QACnB,MAAM,gBAAgB,GAAG,iBAAiB,CAAC,KAAK,EAAE,CAAC;QACnD,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC,IAAI,KAAK,uBAAuB,EAAE;YACpE,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;YACrC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SAChC;QACD,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC,IAAI,KAAK,YAAY,IAAI,IAAI,CAAC,IAAI,KAAK,uBAAuB,EAAE;YAClG,8BAA8B,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE,gBAAgB,CAAC,CAAC;SACvE;IACH,CAAC,CAAC,CAAC;IACH,OAAO,OAAO,CAAC;AACjB,CAAC;AAED,MAAM,UAAU,mBAAmB,CAAC,KAA8C;IAChF,MAAM,KAAK,GAAG,IAAI,GAAG,EAAE,CAAC;IACxB,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;IAC5B,OAAO,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;QACvB,mDAAmD;QACnD,oEAAoE;QACpE,MAAM,IAAI,GAAG,KAAK,CAAC,KAAK,EAAG,CAAC;QAE5B,yBAAyB;QACzB,IAAI,MAAM,IAAI,IAAI,EAAE;YAClB,IAAI,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;gBACxB,QAAQ,CAAC,gBAAgB,EAAE,sBAAsB,IAAI,CAAC,IAAI,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;aAC9E;YACD,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACtB;QAED,IAAI,OAAO,IAAI,IAAI,EAAE;YACnB,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;SAC3B;KACF;AACH,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { SideNavigationProps } from './interfaces';\nimport { warnOnce } from '@cloudscape-design/component-toolkit/internal';\n\ntype ExpandableItem = SideNavigationProps.Section | SideNavigationProps.ExpandableLinkGroup;\n\nexport function hasActiveLink(items: ReadonlyArray<SideNavigationProps.Item>, activeHref: string): boolean {\n  for (const item of items) {\n    if (\n      (item.type === 'link' || item.type === 'link-group' || item.type === 'expandable-link-group') &&\n      item.href === activeHref\n    ) {\n      return true;\n    }\n    if (\n      (item.type === 'section' || item.type === 'link-group' || item.type === 'expandable-link-group') &&\n      hasActiveLink(item.items, activeHref)\n    ) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function generateExpandableItemsMapping(\n  items: ReadonlyArray<SideNavigationProps.Item>,\n  mapping: WeakMap<SideNavigationProps.Item, ReadonlyArray<ExpandableItem>> = new WeakMap(),\n  expandableParents: ReadonlyArray<ExpandableItem> = []\n): WeakMap<SideNavigationProps.Item, ReadonlyArray<ExpandableItem>> {\n  items.forEach(item => {\n    const nextLevelParents = expandableParents.slice();\n    if (item.type === 'section' || item.type === 'expandable-link-group') {\n      mapping.set(item, expandableParents);\n      nextLevelParents.unshift(item);\n    }\n    if (item.type === 'section' || item.type === 'link-group' || item.type === 'expandable-link-group') {\n      generateExpandableItemsMapping(item.items, mapping, nextLevelParents);\n    }\n  });\n  return mapping;\n}\n\nexport function checkDuplicateHrefs(items: ReadonlyArray<SideNavigationProps.Item>) {\n  const hrefs = new Set();\n  const queue = items.slice();\n  while (queue.length > 0) {\n    // We just checked that there's items in the queue.\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const item = queue.shift()!;\n\n    // Check duplicated hrefs\n    if ('href' in item) {\n      if (hrefs.has(item.href)) {\n        warnOnce('SideNavigation', `duplicate href in \"${item.text}\": ${item.href}`);\n      }\n      hrefs.add(item.href);\n    }\n\n    if ('items' in item) {\n      queue.push(...item.items);\n    }\n  }\n}\n"]}