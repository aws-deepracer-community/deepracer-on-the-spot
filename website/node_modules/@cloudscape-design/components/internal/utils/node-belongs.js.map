{"version":3,"file":"node-belongs.js","sourceRoot":"","sources":["../../../../src/internal/utils/node-belongs.ts"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AAEtC,OAAO,EAAE,WAAW,EAAE,MAAM,OAAO,CAAC;AACpC,OAAO,EAAE,YAAY,EAAE,MAAM,0CAA0C,CAAC;AAExE;;;;;;GAMG;AACH,MAAM,UAAU,WAAW,CAAC,SAAsB,EAAE,MAAiC;;IACnF,IAAI,CAAC,CAAC,MAAM,YAAY,IAAI,CAAC,EAAE;QAC7B,OAAO,KAAK,CAAC;KACd;IACD,MAAM,MAAM,GAAG,WAAW,CACxB,MAAqB,EACrB,IAAI,CAAC,EAAE,CAAC,IAAI,KAAK,SAAS,IAAI,CAAC,IAAI,YAAY,WAAW,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAC9F,CAAC;IACF,IAAI,MAAM,IAAI,MAAM,KAAK,SAAS,EAAE;QAClC,+DAA+D;QAC/D,OAAO,IAAI,CAAC;KACb;IACD,MAAM,QAAQ,GAAG,MAAM,YAAY,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAA,MAAM,CAAC,OAAO,CAAC,eAAe,mCAAI,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACtH,OAAO,QAAQ,CAAC,CAAC,CAAC,YAAY,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;AACxF,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { findUpUntil } from './dom';\nimport { nodeContains } from '@cloudscape-design/component-toolkit/dom';\n\n/**\n * Checks whether the given node (target) belongs to the container.\n * The function is similar to nodeContains but also accounts for dropdowns with expandToViewport=true.\n *\n * @param container Container node\n * @param target Node that is checked to be a descendant of the container\n */\nexport function nodeBelongs(container: Node | null, target: Node | EventTarget | null): boolean {\n  if (!(target instanceof Node)) {\n    return false;\n  }\n  const portal = findUpUntil(\n    target as HTMLElement,\n    node => node === container || (node instanceof HTMLElement && !!node.dataset.awsuiReferrerId)\n  );\n  if (portal && portal === container) {\n    // We found the container as a direct ancestor without a portal\n    return true;\n  }\n  const referrer = portal instanceof HTMLElement ? document.getElementById(portal.dataset.awsuiReferrerId ?? '') : null;\n  return referrer ? nodeContains(container, referrer) : nodeContains(container, target);\n}\n"]}