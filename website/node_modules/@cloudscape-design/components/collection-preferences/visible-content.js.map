{"version":3,"file":"visible-content.js","sourceRoot":"","sources":["../../../src/collection-preferences/visible-content.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport InternalSpaceBetween from '../space-between/internal';\nimport InternalToggle from '../toggle/internal';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\n\nimport { CollectionPreferencesProps } from './interfaces';\nimport styles from './styles.css.js';\n\nconst isVisible = (id: string, visibleIds: ReadonlyArray<string>) => visibleIds.indexOf(id) !== -1;\n\ninterface ClassNameProps {\n  className: string;\n}\nconst className = (suffix: string): ClassNameProps => ({\n  className: styles[`visible-content-${suffix}`],\n});\n\ninterface VisibleContentPreferenceProps extends CollectionPreferencesProps.VisibleContentPreference {\n  onChange: (value: ReadonlyArray<string>) => void;\n  value?: ReadonlyArray<string>;\n}\n\nexport default function VisibleContentPreference({\n  title,\n  options,\n  value = [],\n  onChange,\n}: VisibleContentPreferenceProps) {\n  const idPrefix = useUniqueId('visible-content');\n\n  const flatOptionsIds = options.reduce<string[]>(\n    (ids, group) => [...ids, ...group.options.reduce<string[]>((groupIds, option) => [...groupIds, option.id], [])],\n    []\n  );\n\n  const onToggle = (id: string) => {\n    if (!isVisible(id, value)) {\n      onChange(\n        [...value, id].sort((firstId, secondId) => flatOptionsIds.indexOf(firstId) - flatOptionsIds.indexOf(secondId))\n      );\n    } else {\n      onChange(value.filter(currentId => currentId !== id));\n    }\n  };\n\n  const selectionOption = (\n    option: CollectionPreferencesProps.VisibleContentOption,\n    optionGroupIndex: number,\n    optionIndex: number\n  ) => {\n    const labelId = `${idPrefix}-${optionGroupIndex}-${optionIndex}`;\n    return (\n      <div key={optionIndex} {...className('option')}>\n        <label {...className('option-label')} htmlFor={labelId}>\n          {option.label}\n        </label>\n        <div {...className('toggle')}>\n          <InternalToggle\n            checked={isVisible(option.id, value)}\n            onChange={() => onToggle(option.id)}\n            disabled={option.editable === false}\n            controlId={labelId}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  const outerGroupLabelId = `${idPrefix}-outer`;\n  return (\n    <div className={styles['visible-content']}>\n      <h3 {...className('title')} id={outerGroupLabelId}>\n        {title}\n      </h3>\n      <InternalSpaceBetween {...className('groups')} size=\"xs\">\n        {options.map((optionGroup, optionGroupIndex) => {\n          const groupLabelId = `${idPrefix}-${optionGroupIndex}`;\n          return (\n            <div\n              key={optionGroupIndex}\n              {...className('group')}\n              role=\"group\"\n              aria-labelledby={`${outerGroupLabelId} ${groupLabelId}`}\n            >\n              <div {...className('group-label')} id={groupLabelId}>\n                {optionGroup.label}\n              </div>\n              <div>\n                {optionGroup.options.map((option, optionIndex) =>\n                  selectionOption(option, optionGroupIndex, optionIndex)\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </InternalSpaceBetween>\n    </div>\n  );\n}\n"]}