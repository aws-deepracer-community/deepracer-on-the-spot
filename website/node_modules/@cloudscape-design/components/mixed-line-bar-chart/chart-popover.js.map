{"version":3,"file":"chart-popover.js","sourceRoot":"","sources":["../../../src/mixed-line-bar-chart/chart-popover.tsx"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AACtC,OAAO,KAAK,EAAE,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AACxC,OAAO,IAAI,MAAM,MAAM,CAAC;AAExB,OAAO,YAAY,MAAM,sCAAsC,CAAC;AAChE,OAAO,kBAAsC,MAAM,6CAA6C,CAAC;AAGjG,OAAO,MAAM,MAAM,iBAAiB,CAAC;AACrC,OAAO,EAAE,UAAU,EAAE,MAAM,mCAAmC,CAAC;AAE/D,OAAO,kBAAkB,MAAM,6CAA6C,CAAC;AAkB7E,eAAe,KAAK,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;AAEnD,SAAS,iBAAiB,CACxB,EACE,YAAY,EACZ,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,gBAAgB,EAChB,MAAM,EACN,SAAS,EACT,IAAI,GAAG,QAAQ,EACf,gBAAgB,EAChB,YAAY,EACZ,YAAY,EACZ,MAAM,EACN,cAAc,GACY,EAC5B,UAAkC;IAElC,MAAM,CAAC,cAAc,EAAE,iBAAiB,CAAC,GAAG,QAAQ,CAAiC,EAAE,CAAC,CAAC;IACzF,OAAO,CACL,oBAAC,UAAU,IAAC,EAAE,EAAE,MAAM,IACnB,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE,CAAC,CACf,6BAAK,GAAG,EAAE,GAAG,EAAE,SAAS,EAAE,IAAI,CAAC,KAAK,KAAK,SAAS,IAAI,MAAM,CAAC,OAAO,CAAC,IAClE,CAAC,MAAM,IAAI,KAAK,KAAK,QAAQ,CAAC,IAAI,gBAAgB,IAAI,CACrD,oBAAC,YAAY,IACX,GAAG,EAAE,UAAU,EACf,KAAK,EAAE,gBAAgB,CAAC,QAAQ,EAChC,QAAQ,EAAE,QAAQ,EAClB,QAAQ,EAAE,gBAAgB,CAAC,QAAQ,EACnC,aAAa,EAAE,QAAQ,EACvB,gBAAgB,EAAE,gBAAgB,EAClC,SAAS,EAAE,SAAS,EACpB,SAAS,EAAE,YAAY,CAAC,OAAO,EAC/B,IAAI,EAAE,IAAI,EACV,YAAY,EAAE,YAAY,EAC1B,YAAY,EAAE,YAAY,EAC1B,MAAM,EAAE,MAAM;QAEd,oBAAC,kBAAkB,IACjB,GAAG,EAAE,gBAAgB,CAAC,QAAQ,EAC9B,OAAO,EAAE,gBAAgB,CAAC,OAAO,EACjC,cAAc,EAAE,cAAc,EAC9B,cAAc,EAAE,cAAc,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EACzD,gBAAgB,EAAE,CAAC,EAAE,EAAE,UAAU,EAAE,EAAE,CACnC,iBAAiB,CAAC,QAAQ,CAAC,EAAE;gBAC3B,MAAM,iCAAiC,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACvF,IAAI,UAAU,EAAE;oBACd,iCAAiC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;iBAC3C;qBAAM;oBACL,iCAAiC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;iBAC9C;gBACD,uCACK,QAAQ,KACX,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE,iCAAiC,IAC9D;YACJ,CAAC,CAAC,GAEJ;QACD,MAAM,IAAI,oBAAC,kBAAkB,QAAE,MAAM,CAAsB,CAC/C,CAChB,CACG,CACP,CACU,CACd,CAAC;AACJ,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useState } from 'react';\nimport clsx from 'clsx';\n\nimport ChartPopover from '../internal/components/chart-popover';\nimport ChartSeriesDetails, { ExpandedSeries } from '../internal/components/chart-series-details';\nimport { ChartDataTypes, MixedLineBarChartProps } from './interfaces';\n\nimport styles from './styles.css.js';\nimport { Transition } from '../internal/components/transition';\nimport { HighlightDetails } from './format-highlighted';\nimport ChartPopoverFooter from '../internal/components/chart-popover-footer';\n\nexport interface MixedChartPopoverProps<T extends ChartDataTypes> {\n  containerRef: React.RefObject<HTMLDivElement>;\n  trackRef: React.RefObject<SVGElement>;\n  isOpen: boolean;\n  isPinned: boolean;\n  highlightDetails: null | HighlightDetails;\n  onDismiss(): void;\n  size: MixedLineBarChartProps<T>['detailPopoverSize'];\n  footer?: React.ReactNode;\n  dismissAriaLabel?: string;\n  onMouseEnter?: (event: React.MouseEvent) => void;\n  onMouseLeave?: (event: React.MouseEvent) => void;\n  onBlur?: (event: React.FocusEvent) => void;\n  setPopoverText: (s: string) => void;\n}\n\nexport default React.forwardRef(MixedChartPopover);\n\nfunction MixedChartPopover<T extends ChartDataTypes>(\n  {\n    containerRef,\n    trackRef,\n    isOpen,\n    isPinned,\n    highlightDetails,\n    footer,\n    onDismiss,\n    size = 'medium',\n    dismissAriaLabel,\n    onMouseEnter,\n    onMouseLeave,\n    onBlur,\n    setPopoverText,\n  }: MixedChartPopoverProps<T>,\n  popoverRef: React.Ref<HTMLElement>\n) {\n  const [expandedSeries, setExpandedSeries] = useState<Record<string, ExpandedSeries>>({});\n  return (\n    <Transition in={isOpen}>\n      {(state, ref) => (\n        <div ref={ref} className={clsx(state === 'exiting' && styles.exiting)}>\n          {(isOpen || state !== 'exited') && highlightDetails && (\n            <ChartPopover\n              ref={popoverRef}\n              title={highlightDetails.position}\n              trackRef={trackRef}\n              trackKey={highlightDetails.position}\n              dismissButton={isPinned}\n              dismissAriaLabel={dismissAriaLabel}\n              onDismiss={onDismiss}\n              container={containerRef.current}\n              size={size}\n              onMouseEnter={onMouseEnter}\n              onMouseLeave={onMouseLeave}\n              onBlur={onBlur}\n            >\n              <ChartSeriesDetails\n                key={highlightDetails.position}\n                details={highlightDetails.details}\n                setPopoverText={setPopoverText}\n                expandedSeries={expandedSeries[highlightDetails.position]}\n                setExpandedState={(id, isExpanded) =>\n                  setExpandedSeries(oldState => {\n                    const expandedSeriesInCurrentCoordinate = new Set(oldState[highlightDetails.position]);\n                    if (isExpanded) {\n                      expandedSeriesInCurrentCoordinate.add(id);\n                    } else {\n                      expandedSeriesInCurrentCoordinate.delete(id);\n                    }\n                    return {\n                      ...oldState,\n                      [highlightDetails.position]: expandedSeriesInCurrentCoordinate,\n                    };\n                  })\n                }\n              />\n              {footer && <ChartPopoverFooter>{footer}</ChartPopoverFooter>}\n            </ChartPopover>\n          )}\n        </div>\n      )}\n    </Transition>\n  );\n}\n"]}